# `withBaseControl`

The WordPress (Gutenberg) Editor has a component that takes care of adding useful styling surrounding inputs (typically in the Inspector). This is provided via the `<BaseControl />` component.  When a component is provided to the `withBaseControl` component, it wraps that component in the WordPress `<BaseControl />` component thus providing all the associated styling (and accessibility) with it.

## Arguments

### customId

If provided, this string will be used in the automatically generated css id that gets passed through as a prop on the wrapped component.  If a label is provided, it will have its `for` attribute value assigned to this id as well so the label is correctly linked with the wrapped component.

The HOC will generate an id that ends up in this format (instanceId is provided by the `withInstanceId` HOC - see documentation on the `instanceId` prop below):

```js
`inspector-${ customId }-control-${ instanceId }`
```

- Type: `String`
- Required: No
- Default: ''

## Props

Along with receiving and passing through any props to the wrapped component, the `<BaseControl />` component also receives:

### label

If provided, the HOC will automatically generate a label with this text linked to the element with the generated passed through css id implemented in the wrapped component.  This does mean that somewhere in your wrapped component you should be using the generated css id.

- Type: `String`
- Required: No
- Default: undefined

### instanceId

instanceId is actually not a prop you provide (and even if its provided it will not be used), but rather a prop generated by the [`withInstanceId` WordPress HOC](https://github.com/WordPress/gutenberg/tree/master/packages/compose/src/with-instance-id). This prop gets used to make the `id` unique for each Component wrapped by our `withBaseControl` HOC.

- Type: `Number`
- Required: No
- Default: 0

### className

If provided, this string will be appended to the css class used for the top level container rendered by the `<BaseControl/>` component as well as passed through to the WrappedComponent.

- Type: `String`
- Required: No
- Default: undefined

### help

If provided, this string will be used as the content for accessible help text describing the wrapped component.

- Type: `String`
- Required: No
- Default: undefined

## Usage

Note: If this HOC is being used in an ee core component then please import it directly as opposed to using the package name.  This ensures that the built component bundle will have the necessary code from the HOC in the bundle.

This component is exposed two ways:

**`eejs.hocs` global**

```js
const { withBaseControl } = eejs.hocs;
```

**`@eventespresso/higher-order-components` package**

```js
import { withBaseControl } from '@eventespresso/higher-order-components';
```

Note: this package isn't published yet so you'll need to point to it via your build process. For example, if you use webpack you can register this as an external via:

```js
module.exports = {
    externals: {
        '@eventespresso/higher-order-components': 'eejs.hocs',
    }
}
```

You will also need to ensure that the `eventespresso-hoc` Components script handle is a dependency for your implemented code. You could do something like this:

```php
use EventEspresso\core\domain\services\assets\CoreAssetManager;

wp_register_script(
    'my-script',
    'https://url-to-my-script.com'
    array( CoreAssetManager::JS_HANDLE_HOCS ),
    $version_string,
    true
);
```

You can implement the HOC by doing something similar to this:

```jsx
import { withBaseControl } from '@eventespresso/higher-order-components';

function MyCustomComponent = props => <div id={ props.id } />{ props.content }</div>;

export default withBaseControl( 'custom-id' )( MyCustomComponent );
```

If you were to then use the above exported component as an imported `EnhancedMyCustomComponent` somewhere in as a jsx node, for example:

```jsx
<EnhancedMyCustomComponent content={ 'Just some content' } />
```

You'd end up with something like this rendered:

```jsx
<div class="components-base-control">
    <div class="components-base-control__field">
        <div id="inspector-custom-id-control-0">
            Just some content
        </div>
    </div>
</div>
```
