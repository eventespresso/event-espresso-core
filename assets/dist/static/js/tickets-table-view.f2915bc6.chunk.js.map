{"version":3,"sources":["domain/eventEditor/ui/tickets/TicketRegistrationsLink.tsx","domain/eventEditor/ui/tickets/ticketsList/cardView/TicketQuantity.tsx","domain/eventEditor/ui/tickets/ticketsList/editable/EditableDesc.tsx","domain/eventEditor/ui/tickets/ticketsList/editable/EditableName.tsx","domain/eventEditor/ui/tickets/hooks/useRecalculateBasePrice.ts","domain/eventEditor/ui/tickets/ticketsList/editable/EditablePrice.tsx","domain/eventEditor/ui/tickets/hooks/useTicketsActionMenuItems.ts","domain/eventEditor/ui/tickets/ticketsList/actionsMenu/TicketActionsMenu.tsx","domain/eventEditor/ui/tickets/ticketsList/tableView/useHeaderRowGenerator.tsx","domain/eventEditor/ui/tickets/ticketsList/tableView/useBodyRowGenerator.tsx","domain/eventEditor/ui/tickets/ticketsList/tableView/TableView.tsx"],"names":["TicketRegistrationsLink","ticket","admin","useConfig","siteUrl","adminUrl","getAdminUrl","adminSiteUrl","page","ADMIN_ROUTES","REGISTRATIONS","eventId","useEventId","regListUrl","addQueryArgs","event_id","ticket_id","dbId","return","countTitle","__","tooltip","tooltipProps","useMemoStringify","placement","count","registrationCount","title","emphasizeZero","offset","href","React","memo","getPropsAreEqual","TicketQuantity","entity","updateEntity","useTicketMutator","id","onChange","useCallback","qty","quantity","parseInfinity","cacheId","onChangeValue","value","EditableDesc","className","onChangeDesc","description","ticketDesc","EditableName","view","onChangeName","name","ticketName","fitText","tag","useRecalculateBasePrice","ticketId","getDataState","useInitialState","usePriceMutator","calculateBasePrice","filter","isBasePrice","basePrice","amount","EditablePrice","recalculateBasePrice","onChangePrice","price","parseFloat","reverseCalculate","wrapperProps","CurrencyInput","placeholder","useTicketsActionMenuItems","useEntityActionsMenuItems","TicketActionsMenu","props","menuItems","useHeaderRowGenerator","filterState","displayStartOrEndDate","cells","key","type","filterCellByStartOrEndDate","primary","useBodyRowGenerator","formatAmount","useMoneyDisplay","sortingEnabled","bgClassName","getBackgroundColorClassName","shortenGuid","statusClassName","status","cellsData","format","Date","startDate","ENTITY_LIST_DATE_TIME_FORMAT","endDate","sold","addZebraStripesOnMobile","TableView","useTicketsListContext","filteredEntities","sortTickets","useReorderTickets","sortResponder","bodyRowGenerator","headerRowGenerator","entities","tableId","tableCaption","onSort"],"mappings":"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","file":"static/js/tickets-table-view.f2915bc6.chunk.js","sourcesContent":["import React from 'react';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __ } from '@wordpress/i18n';\n\nimport { ADMIN_ROUTES } from '@sharedConstants/adminRoutes';\nimport getAdminUrl from '@sharedServices/utils/url/getAdminUrl';\nimport { getPropsAreEqual } from '@appServices/utilities';\nimport { RegistrationsLink } from '@appLayout/entityList';\nimport { Ticket } from '@edtrServices/apollo/types';\nimport useConfig from '@appServices/config/useConfig';\nimport useEventId from '@edtrServices/apollo/queries/events/useEventId';\n\nimport ItemCount from '@appDisplay/ItemCount';\nimport { useMemoStringify } from '@application/services/hooks';\n\ninterface Props {\n\tticket: Ticket;\n}\n\nconst TicketRegistrationsLink: React.FC<Props> = ({ ticket }) => {\n\tconst {\n\t\tsiteUrl: { admin },\n\t} = useConfig();\n\tconst adminUrl = getAdminUrl({ adminSiteUrl: admin, page: ADMIN_ROUTES.REGISTRATIONS });\n\tconst eventId = useEventId();\n\tconst regListUrl = addQueryArgs(adminUrl, {\n\t\tevent_id: eventId,\n\t\tticket_id: ticket.dbId,\n\t\treturn: 'edit',\n\t});\n\tconst countTitle = __('total registrations.');\n\tconst tooltip = __('view registrations for this ticket.');\n\tconst tooltipProps = useMemoStringify({ placement: 'top' as 'top' });\n\n\treturn (\n\t\t<ItemCount count={ticket.registrationCount} title={countTitle} emphasizeZero={false} offset={[12, -4]}>\n\t\t\t<RegistrationsLink href={regListUrl} tooltip={tooltip} tooltipProps={tooltipProps} />\n\t\t</ItemCount>\n\t);\n};\n\nexport default React.memo(TicketRegistrationsLink, getPropsAreEqual(['ticket', 'cacheId']));\n","import React, { useCallback } from 'react';\nimport { __ } from '@wordpress/i18n';\n\nimport parseInfinity from '@appServices/utilities/number/parseInfinity';\nimport { InlineEditInfinity, TextProps } from '@appInputs/InlineEditInput';\nimport { useTicketMutator } from '@edtrServices/apollo/mutations';\nimport { getPropsAreEqual } from '@appServices/utilities';\nimport type { TicketItemProps } from '../types';\n\nconst TicketQuantity: React.FC<TicketItemProps> = ({ entity: ticket }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst onChange: TextProps['onChange'] = useCallback(\n\t\t(qty) => {\n\t\t\tconst quantity = parseInfinity(qty);\n\t\t\tif (quantity !== ticket.quantity) {\n\t\t\t\tupdateEntity({ quantity });\n\t\t\t}\n\t\t},\n\t\t[ticket.cacheId]\n\t);\n\n\treturn (\n\t\t<InlineEditInfinity\n\t\t\tonChangeValue={onChange}\n\t\t\tvalue={`${ticket.quantity}`}\n\t\t\ttooltip={__('Click to edit quantity...')}\n\t\t/>\n\t);\n};\n\nexport default React.memo(TicketQuantity, getPropsAreEqual(['entity', 'cacheId']));\n","import React, { useCallback } from 'react';\nimport { __ } from '@wordpress/i18n';\n\nimport type { TicketItemProps } from '../types';\nimport { useTicketMutator } from '@edtrServices/apollo/mutations';\nimport { InlineEditTextArea } from '@appInputs/InlineEditInput';\nimport { getPropsAreEqual } from '@appServices/utilities';\n\ninterface EditableDescProps extends TicketItemProps {\n\tclassName?: string;\n}\n\nconst EditableDesc: React.FC<EditableDescProps> = ({ entity: ticket, className }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst onChangeDesc = useCallback(\n\t\t(description: string): void => {\n\t\t\tif (description !== ticket.description) {\n\t\t\t\tupdateEntity({ description });\n\t\t\t}\n\t\t},\n\t\t[ticket.cacheId]\n\t);\n\n\tconst tooltip = __('Click to edit description...');\n\n\tconst ticketDesc = ticket.description || tooltip;\n\n\treturn <InlineEditTextArea className={className} onChangeValue={onChangeDesc} tooltip={tooltip} value={ticketDesc} />;\n};\n\nexport default React.memo(EditableDesc, getPropsAreEqual(['entity', 'description']));\n","import React, { useCallback } from 'react';\nimport { __ } from '@wordpress/i18n';\n\nimport type { TicketItemProps } from '../types';\nimport { useTicketMutator } from '@edtrServices/apollo/mutations';\nimport { InlineEditText } from '@appInputs/InlineEditInput';\nimport { getPropsAreEqual } from '@appServices/utilities';\n\ninterface EditableNameProps extends TicketItemProps {\n\tclassName?: string;\n\tview?: 'card' | 'table';\n}\n\nconst EditableName: React.FC<EditableNameProps> = ({ className, entity: ticket, view = 'card' }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst onChangeName = useCallback(\n\t\t(name: string): void => {\n\t\t\tif (name !== ticket.name) {\n\t\t\t\tupdateEntity({ name });\n\t\t\t}\n\t\t},\n\t\t[ticket.cacheId]\n\t);\n\n\tconst tooltip = __('Click to edit title...');\n\n\tconst ticketName = ticket.name || tooltip;\n\n\treturn (\n\t\t<InlineEditText\n\t\t\tfitText={view === 'card'}\n\t\t\ttag={view === 'table' ? 'p' : 'h4'}\n\t\t\tclassName={className}\n\t\t\tonChangeValue={onChangeName}\n\t\t\ttooltip={tooltip}\n\t\t\tvalue={ticketName}\n\t\t/>\n\t);\n};\n\nexport default React.memo(EditableName, getPropsAreEqual(['entity', 'name']));\n","import { useCallback } from 'react';\n\nimport { EntityId } from '@dataServices/types';\nimport { useInitialState } from '@edtrUI/tickets/ticketPriceCalculator/data';\nimport { calculateBasePrice } from '@edtrUI/tickets/ticketPriceCalculator/utils';\nimport { isBasePrice } from '@sharedEntities/priceTypes/predicates';\nimport { usePriceMutator } from '@edtrServices/apollo/mutations';\n\nconst useRecalculateBasePrice = (ticketId: EntityId): VoidFunction => {\n\t// This will give us the exact state expected by `calculateBasePrice()`\n\tconst getDataState = useInitialState({ ticketId });\n\tconst { updateEntity } = usePriceMutator();\n\n\treturn useCallback(() => {\n\t\t// get the list of updated prices with the amount of base price updated\n\t\tconst newPrices = calculateBasePrice(getDataState(null));\n\t\t// the price if present should be the basePrice\n\t\tconst [basePrice] = newPrices.filter(isBasePrice);\n\n\t\t// if we are lucky\n\t\tif (basePrice?.id) {\n\t\t\tconst { id, amount } = basePrice;\n\t\t\t// update the base price\n\t\t\tupdateEntity({ id, amount });\n\t\t}\n\t}, [getDataState, updateEntity]);\n};\n\nexport default useRecalculateBasePrice;\n","import React, { useCallback } from 'react';\nimport { __ } from '@wordpress/i18n';\n\nimport type { TicketItemProps } from '../types';\nimport { useTicketMutator } from '@edtrServices/apollo/mutations';\nimport { getPropsAreEqual } from '@appServices/utilities';\nimport CurrencyInput from '@appInputs/CurrencyInput';\nimport useRecalculateBasePrice from '../../hooks/useRecalculateBasePrice';\nimport { useMemoStringify } from '@application/services/hooks';\n\ninterface EditablePriceProps extends TicketItemProps {\n\tclassName?: string;\n}\n\nconst EditablePrice: React.FC<EditablePriceProps> = ({ entity: ticket, className }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\tconst recalculateBasePrice = useRecalculateBasePrice(ticket.id);\n\tconst onChangePrice = useCallback(\n\t\t({ amount: price }: any): void => {\n\t\t\tprice = parseFloat(price);\n\t\t\tif (price !== ticket.price) {\n\t\t\t\tupdateEntity({ price, reverseCalculate: true });\n\t\t\t\trecalculateBasePrice();\n\t\t\t}\n\t\t},\n\t\t[ticket.cacheId]\n\t);\n\n\tconst wrapperProps = useMemoStringify({ className });\n\n\treturn (\n\t\t<CurrencyInput\n\t\t\tid={ticket.id}\n\t\t\tamount={ticket.price}\n\t\t\tplaceholder={__('set price...')}\n\t\t\twrapperProps={wrapperProps}\n\t\t\tonChange={onChangePrice}\n\t\t\ttag={'h3'}\n\t\t\ttooltip={__('Click to edit ticket total...')}\n\t\t/>\n\t);\n};\n\nexport default React.memo(EditablePrice, getPropsAreEqual(['entity', 'price']));\n","import React from 'react';\n\nimport { Ticket } from '@edtrServices/apollo/types';\nimport { useEntityActionsMenuItems } from '@edtrHooks/index';\n\nconst useTicketsActionMenuItems = (ticket: Ticket): Array<React.ReactNode> => {\n\treturn useEntityActionsMenuItems('ticket', ticket);\n};\n\nexport default useTicketsActionMenuItems;\n","import React from 'react';\n\nimport { ActionsMenuComponentProps, EntityActionsMenu } from '@appLayout/entityActionsMenu';\nimport useTicketsActionMenuItems from '../../hooks/useTicketsActionMenuItems';\nimport { Ticket } from '@edtrServices/apollo/types';\nimport { getPropsAreEqual } from '@appServices/utilities';\n\nconst TicketActionsMenu: React.FC<ActionsMenuComponentProps<Ticket>> = ({ entity, ...props }) => {\n\tconst menuItems = useTicketsActionMenuItems(entity);\n\n\treturn <EntityActionsMenu {...props} menuItems={menuItems} />;\n};\n\nexport default React.memo(TicketActionsMenu, getPropsAreEqual(['entity', 'cacheId']));\n","import React, { useCallback } from 'react';\nimport { __ } from '@wordpress/i18n';\n\nimport { Cell } from '@appLayout/espressoTable';\nimport { filterCellByStartOrEndDate } from '@sharedServices/filterState';\nimport { HeaderRowGeneratorFn } from '@appLayout/entityList';\nimport { TicketsFilterStateManager } from '@edtrServices/filterState';\n\ntype TicketsTableHeaderRowGen = HeaderRowGeneratorFn<TicketsFilterStateManager>;\n\nconst useHeaderRowGenerator = (): TicketsTableHeaderRowGen => {\n\treturn useCallback<TicketsTableHeaderRowGen>((filterState) => {\n\t\tconst { displayStartOrEndDate } = filterState;\n\n\t\tconst cellsData: Array<Cell> = [\n\t\t\t{\n\t\t\t\tkey: 'stripe',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-entity-list-status-stripe ee-rspnsv-table-column-nano',\n\t\t\t\tvalue: '',\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'id',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-id ee-number-column ee-rspnsv-table-column-nano',\n\t\t\t\tvalue: __('ID'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'name',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-name ee-rspnsv-table-column-bigger',\n\t\t\t\tvalue: __('Name'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'start',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-name-start ee-rspnsv-table-column-default',\n\t\t\t\tvalue: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Goes on Sale')}</span>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('On Sale')}</span>\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'end',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-ticket-list-col-end ee-rspnsv-table-column-default',\n\t\t\t\tvalue: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Sale Ends')}</span>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('Ends')}</span>\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'price',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-price ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: __('Price'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'quantity',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-quantity ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: __('Quantity'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'sold',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-sold ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: __('Sold'),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'registrations',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-registrations ee-rspnsv-table-column-smaller ee-centered-column',\n\t\t\t\tvalue: (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Registrations')}</span>\n\t\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('Regs')}</span>\n\t\t\t\t\t</>\n\t\t\t\t),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'actions',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-col-hdr ee-actions-column ee-rspnsv-table-column-big ee-centered-column',\n\t\t\t\tvalue: <span className={'ee-rspnsv-table-long-label'}>{__('Actions')}</span>,\n\t\t\t},\n\t\t];\n\n\t\tconst cells = cellsData.filter(filterCellByStartOrEndDate(displayStartOrEndDate));\n\n\t\treturn {\n\t\t\tcells,\n\t\t\tclassName: 'ee-editor-ticket-list-items-header-row',\n\t\t\tkey: 'ticket-header-row',\n\t\t\tprimary: true,\n\t\t\ttype: 'row',\n\t\t};\n\t}, []);\n};\n\nexport default useHeaderRowGenerator;\n","import React, { useCallback } from 'react';\nimport { format } from 'date-fns';\nimport { filter, pipe } from 'ramda';\n\nimport { addZebraStripesOnMobile } from '@appLayout/espressoTable/utils';\nimport { Cell } from '@appLayout/espressoTable';\nimport { filterCellByStartOrEndDate } from '@sharedServices/filterState';\nimport { ENTITY_LIST_DATE_TIME_FORMAT } from '@appConstants/dateFnsFormats';\nimport { getBackgroundColorClassName, status } from '@sharedEntities/tickets/helpers';\nimport { shortenGuid } from '@appServices/utilities/text';\nimport { Ticket } from '@edtrServices/apollo/types';\nimport TicketActionsMenu from '@edtrUI/tickets/ticketsList/actionsMenu/TicketActionsMenu';\nimport { useMoneyDisplay } from '@appServices/utilities/money';\nimport TicketQuantity from '../cardView/TicketQuantity';\nimport { BodyRowGeneratorFn } from '@appLayout/entityList';\nimport { TicketsFilterStateManager } from '@edtrServices/filterState';\nimport { EditableName } from '../editable';\nimport TicketRegistrationsLink from '../../TicketRegistrationsLink';\n\nimport '@application/ui/styles/root/entity-status.css';\n\ntype TicketsTableBodyRowGen = BodyRowGeneratorFn<Ticket, TicketsFilterStateManager>;\n\nconst useBodyRowGenerator = (): TicketsTableBodyRowGen => {\n\tconst { formatAmount } = useMoneyDisplay();\n\n\treturn useCallback<TicketsTableBodyRowGen>(({ entity: ticket, filterState }) => {\n\t\tconst { displayStartOrEndDate, sortingEnabled } = filterState;\n\n\t\tconst bgClassName = getBackgroundColorClassName(ticket);\n\t\tconst id = ticket.dbId || shortenGuid(ticket.id);\n\t\tconst statusClassName = status(ticket);\n\n\t\tconst name = {\n\t\t\tkey: 'name',\n\t\t\ttype: 'cell',\n\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-name ee-col-name ee-rspnsv-table-column-bigger ee-rspnsv-table-hide-on-mobile',\n\t\t\tvalue: sortingEnabled ? (\n\t\t\t\tticket.name\n\t\t\t) : (\n\t\t\t\t<EditableName className={'ee-entity-list-text ee-focus-priority-5'} entity={ticket} view={'table'} />\n\t\t\t),\n\t\t};\n\n\t\tconst quantity = {\n\t\t\tkey: 'quantity',\n\t\t\ttype: 'cell',\n\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-quantity ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\tvalue: sortingEnabled ? ticket.quantity : <TicketQuantity entity={ticket} />,\n\t\t};\n\n\t\tconst cellsData: Array<Cell> = [\n\t\t\t{\n\t\t\t\tkey: 'stripe',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: `ee-ticket-list-cell ee-entity-list-status-stripe ${bgClassName} ee-rspnsv-table-column-nano`,\n\t\t\t\tvalue: <div className={'ee-rspnsv-table-show-on-mobile'}>{ticket.name}</div>,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'id',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-id ee-rspnsv-table-column-nano ee-number-column',\n\t\t\t\tvalue: id,\n\t\t\t},\n\t\t\tname,\n\t\t\t{\n\t\t\t\tkey: 'start',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-start ee-rspnsv-table-column-default',\n\t\t\t\tvalue: format(new Date(ticket.startDate), ENTITY_LIST_DATE_TIME_FORMAT),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'end',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-end ee-rspnsv-table-column-default',\n\t\t\t\tvalue: format(new Date(ticket.endDate), ENTITY_LIST_DATE_TIME_FORMAT),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'price',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-col-hdr ee-ticket-list-col-price ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: formatAmount(ticket.price),\n\t\t\t},\n\t\t\tquantity,\n\t\t\t{\n\t\t\t\tkey: 'sold',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-cell ee-ticket-list-col-sold ee-rspnsv-table-column-tiny ee-number-column',\n\t\t\t\tvalue: ticket.sold,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'registrations',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName:\n\t\t\t\t\t'ee-ticket-list-cell ee-ticket-list-col-registrations ee-rspnsv-table-column-smaller ee-centered-column',\n\t\t\t\tvalue: sortingEnabled ? '-' : <TicketRegistrationsLink ticket={ticket} />,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'actions',\n\t\t\t\ttype: 'cell',\n\t\t\t\tclassName: 'ee-ticket-list-cell ee-actions-column ee-rspnsv-table-column-big',\n\t\t\t\tvalue: sortingEnabled ? '-' : <TicketActionsMenu entity={ticket} />,\n\t\t\t},\n\t\t];\n\n\t\tconst exclude = ['row', 'stripe', 'name', 'actions'];\n\n\t\tconst cells = pipe(\n\t\t\tfilter(filterCellByStartOrEndDate(displayStartOrEndDate)),\n\t\t\taddZebraStripesOnMobile(exclude)\n\t\t)(cellsData);\n\n\t\treturn {\n\t\t\tcells,\n\t\t\tclassName: `ee-editor-date-list-view-row ${statusClassName}`,\n\t\t\tid: `ee-editor-date-list-view-row-${ticket.id}`,\n\t\t\tkey: `row-${ticket.id}`,\n\t\t\ttype: 'row',\n\t\t};\n\t}, []); // no deps\n};\n\nexport default useBodyRowGenerator;\n","import React from 'react';\nimport { __ } from '@wordpress/i18n';\n\nimport { EntityTable } from '@appLayout/entityList';\nimport useHeaderRowGenerator from './useHeaderRowGenerator';\nimport useBodyRowGenerator from './useBodyRowGenerator';\nimport { useTicketsListContext } from '@edtrServices/context/EntityListContext';\nimport { useReorderTickets } from '@edtrServices/apollo/mutations';\n\n/**\n * Displays tickets in a standard list table like view\n */\nconst TableView: React.FC = () => {\n\tconst { filterState, filteredEntities } = useTicketsListContext();\n\n\tconst { sortResponder: sortTickets } = useReorderTickets(filteredEntities);\n\n\tconst bodyRowGenerator = useBodyRowGenerator();\n\tconst headerRowGenerator = useHeaderRowGenerator();\n\n\treturn (\n\t\t<EntityTable\n\t\t\tentities={filteredEntities}\n\t\t\tfilterState={filterState}\n\t\t\tbodyRowGenerator={bodyRowGenerator}\n\t\t\theaderRowGenerator={headerRowGenerator}\n\t\t\tclassName={'ee-tickets-list-list-view ee-fade-in'}\n\t\t\ttableId='ticket-entities-table-view'\n\t\t\ttableCaption={__('Tickets')}\n\t\t\tonSort={sortTickets}\n\t\t/>\n\t);\n};\n\nexport default TableView;\n"],"sourceRoot":""}