!function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(e,t){!function(){e.exports=this.eejs.i18n}()},function(e,t){!function(){e.exports=this.wp.element}()},function(e,t,r){e.exports=r(21)()},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){!function(){e.exports=this.eejs.model}()},function(e,t){!function(){e.exports=this.eejs.components}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(19),s=r(5);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t,r){var n=r(20);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t){!function(){e.exports=this.eejs.editorHocs}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t,r){e.exports=r(24)},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,r){"use strict";var n=r(22);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,r,s,a,o){if(o!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(8),s=r(0),a=r(9),o=r.n(a),i=r(10),c=r.n(i),l=r(11),u=r.n(l),p=r(12),d=r.n(p),f=r(5),b=r.n(f),v=r(13),y=r.n(v),h=r(3),m=r.n(h),O=r(1),_=r(14),j=r(4),g=r(15),I=r(7),S=r(16),E=r(6),w=r(2),A=r.n(w),T=r(17);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){m()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={showExpired:!0,limit:50},x=function(e){var t=e.eventId,r=e.datetimeId,n=e.ticketId;return 0===t&&0===r&&0===n},C=[],R=200,L=function(e){function t(e){var r;o()(this,t),r=u()(this,d()(t).call(this,e)),m()(b()(r),"setEventId",(function(e){var t=null!==e&&e.value?parseInt(e.value,10):0;r.props.setAttributes({eventId:t,datetimeId:0,ticketId:0}),r.setState({datetimeQueryData:k({},r.state.datetimeQueryData,{forEventId:t})})})),m()(b()(r),"setDatetimeId",(function(e){var t=null!==e&&e.value?parseInt(e.value,10):0;r.props.setAttributes({datetimeId:t,ticketId:0}),r.setState({ticketQueryData:k({},r.state.ticketQueryData,{forDatetimeId:t})})})),m()(b()(r),"setTicketId",(function(e){var t=null!==e&&e.value?parseInt(e.value,10):0;r.props.setAttributes({ticketId:t})})),m()(b()(r),"setStatus",(function(e){var t=null!==e&&e.value?e.value:E.statusModel.REGISTRATION_STATUS_ID.APPROVED;r.props.setAttributes({status:t})})),m()(b()(r),"setLimit",(function(e){r.props.setAttributes({limit:parseInt(e,10)})})),m()(b()(r),"setOrderBy",(function(e){r.props.setAttributes({orderBy:e})})),m()(b()(r),"setOrder",(function(e){r.props.setAttributes({order:e})})),m()(b()(r),"setAvatarSize",(function(e){r.props.setAttributes({avatarSize:parseInt(e,10)})})),m()(b()(r),"toggleShowGravatar",(function(e){r.props.setAttributes({showGravatar:e})})),m()(b()(r),"toggleDisplayOnArchives",(function(e){r.props.setAttributes({displayOnArchives:e})}));var n=r.props.attributes,s=n.eventId,a=n.datetimeId;return r.state={eventQueryData:k({},P),datetimeQueryData:k({},P,{forEventId:s}),ticketQueryData:k({},P,{forDatetimeId:a}),statusQueryData:k({},P,{statusType:E.statusModel.STATUS_TYPE_REGISTRATION})},r}return y()(t,e),c()(t,[{key:"getAttendeesDisplay",value:function(){var e=this.props,t=e.isLoading,r=e.attendees,n=this.props.attributes,a=n.showGravatar,o=n.avatarSize,i={avatarWidth:o,avatarHeight:o,avatarClass:n.avatarClass};return t?Object(O.createElement)(j.Placeholder,null,Object(O.createElement)(j.Spinner,null)):x(this.props.attributes)&&r===C?Object(O.createElement)(j.Placeholder,null,Object(s.__)("To get started, select what event you want to show attendees from in the block settings.","event_espresso")):!t&&Object(T.isEmpty)(r)?Object(O.createElement)(j.Placeholder,null,Object(s.__)("There are no attendees for selected options.","event_espresso")):Object(O.createElement)(I.EventAttendeeList,{attendees:this.applyLimit(r),showGravatar:a,avatarOptions:i,isLoading:t,containerCssClass:"ee-core-blocks event-espresso-blocks",containerId:"ee-block-event-attendees"})}},{key:"applyLimit",value:function(e){return e.length<=this.props.attributes.limit?e:e.slice(0,this.props.attributes.limit)}},{key:"getInspectorControls",value:function(e){var t=this.props.attendees.length||0;return Object(O.createElement)(_.InspectorControls,null,Object(O.createElement)(j.PanelBody,{title:Object(s.__)("Filter By Settings","event_espresso")},Object(O.createElement)(I.EditorEventSelect,{key:"attendees-event-select",selected:e.eventId,onSelect:this.setEventId,queryData:this.state.eventQueryData}),0!==e.eventId&&Object(O.createElement)(I.EditorDatetimeSelect,{key:"attendees-datetime-select",selected:e.datetimeId,onSelect:this.setDatetimeId,queryData:this.state.datetimeQueryData}),0!==e.datetimeId&&Object(O.createElement)(I.EditorTicketSelect,{key:"attendees-ticket-select",selected:e.ticketId,onSelect:this.setTicketId,queryData:this.state.ticketQueryData}),Object(O.createElement)(I.EditorStatusSelect,{key:"attendees-status-select",selected:e.status,onSelect:this.setStatus,queryData:this.state.statusQueryData,label:Object(s.__)("Select Registration Status","event_espresso")}),Object(O.createElement)(I.QueryLimit,{label:Object(s.__)("Number of Attendees to Display:","event_espresso"),limit:e.limit,onLimitChange:this.setLimit,min:1,withSlider:!1,help:Object(s.sprintf)(Object(s._n)("Used to adjust the number of attendees displayed (There is %d total attendee for the current filter settings).","Used to adjust the number of attendees displayed (There are %d total attendees for the current filter settings).",t,"event_espresso"),t)}),Object(O.createElement)(j.SelectControl,{label:Object(s.__)("Order Attendees by:","event_espresso"),value:e.orderBy,options:[{label:Object(s.__)("Attendee id","event_espresso"),value:"id"},{label:Object(s.__)("Last name only","event_espresso"),value:"lastNameOnly"},{label:Object(s.__)("First name only","event_espresso"),value:"firstNameOnly"},{label:Object(s.__)("First, then Last name","event_espresso"),value:"firstThenLastName"},{label:Object(s.__)("Last, then First name","event_espresso"),value:"lastThenFirstName"}],onChange:this.setOrderBy}),Object(O.createElement)(j.SelectControl,{label:Object(s.__)("Sort order:","event_espresso"),value:e.order,options:[{label:Object(s.__)("Ascending","event_espresso"),value:E.QUERY_ORDER_ASC},{label:Object(s.__)("Descending","event_espresso"),value:E.QUERY_ORDER_DESC}],onChange:this.setOrder})),Object(O.createElement)(j.PanelBody,{title:Object(s.__)("Gravatar Setttings","event_espresso")},Object(O.createElement)(j.ToggleControl,{label:Object(s.__)("Display Gravatar","event_espresso"),checked:e.showGravatar,onChange:this.toggleShowGravatar,help:e.showGravatar?Object(s.__)("Gravatar images are shown for each attendee.","event_espresso"):Object(s.__)("No gravatar images are shown for each attendee.","event_espresso")}),e.showGravatar&&Object(O.createElement)(j.RangeControl,{label:Object(s.__)("Size of Gravatar","event_espresso"),value:e.avatarSize,min:10,max:128,onChange:this.setAvatarSize})),Object(O.createElement)(S.NotWithPostTypeCheck,{excludedPostTypeSlugs:"page"},Object(O.createElement)(j.PanelBody,{title:Object(s.__)("Archive Settings","event_espresso")},Object(O.createElement)(j.ToggleControl,{label:Object(s.__)("Display on Archives","event_espresso"),checked:e.displayOnArchives,onChange:this.toggleDisplayOnArchives,help:e.displayOnArchives?Object(s.__)("Attendees are shown whenever this post is listed in an archive view.","event_espresso"):Object(s.__)("Attendees are hidden whenever this post is listed in an archive view.","event_espresso")}))))}},{key:"render",value:function(){return Object(O.createElement)(O.Fragment,null,this.getAttendeesDisplay(),this.getInspectorControls(this.props.attributes))}}]),t}(O.Component);m()(L,"propTypes",{attendees:A.a.array,isLoading:A.a.bool,attributes:A.a.shape({eventId:A.a.number,datetimeId:A.a.number,ticketId:A.a.number,status:A.a.string,showGravatar:A.a.bool,displayOnArchives:A.a.bool,limit:A.a.number,orderBy:A.a.oneOf(["id","lastNameOnly","firstNameOnly","firstThenLastName","lastThenFirstName"]),order:A.a.oneOf(E.ALLOWED_ORDER_VALUES),avatarSize:A.a.number,avatarClass:A.a.string})}),m()(L,"defaultProps",{attendees:[],isLoading:!0,attributes:{eventId:0,datetimeId:0,ticketId:0,status:E.statusModel.REGISTRATION_STATUS_ID.APPROVED,showGravatar:!0,displayOnArchives:!1,limit:100,orderBy:"lastThenFirstName",order:E.QUERY_ORDER_ASC,avatarSize:24,avatarClass:"contact"}});var G=Object(g.withSelect)((function(e,t){var r=k({},L.defaultProps.attributes),n=t.attributes,s=n.eventId,a=void 0===s?r.eventId:s,o=n.datetimeId,i=void 0===o?r.datetimeId:o,c=n.ticketId,l=void 0===c?r.ticketId:c,u=n.status,p=void 0===u?r.status:u,d=n.orderBy,f=void 0===d?r.orderBy:d,b=n.order,v=void 0===b?r.order:b,y=n.limit,h=void 0===y?r.limit:y,m={forEventId:a,forDatetimeId:i,forTicketId:l,forStatusId:p,showGravatar:!0,defaultWhereConditions:"full_this_minimum_others",order:v,orderBy:f,limit:R=!h||isNaN(h)||h<=R?R:h},O=E.attendeeModel.getQueryString(m),_=e("eventespresso/lists"),j=_.getAttendees,g=_.isRequestingAttendees;return k({},L.defaultProps,{},t,{attributes:k({},L.defaultProps.attributes,{},t.attributes),attendees:x({eventId:a,datetimeId:i,ticketId:l})?C:j(O),isLoading:g(O)})}))(L),N=(r(23),{title:Object(s.__)("Event Attendees","event_espresso"),description:Object(s.__)("Displays a list of people that have registered for the specified event","event_espresso"),icon:"groups",category:"event-espresso",keywords:[Object(s.__)("event","event_espresso"),Object(s.__)("attendees","event_espresso"),Object(s.__)("list","event_espresso")],attributes:{eventId:{type:"number",default:0},datetimeId:{type:"number",default:0},ticketId:{type:"number",default:0},status:{type:"string",default:"RAP"},limit:{type:"number",default:100},order:{type:"string",default:"ASC"},orderBy:{type:"string",default:"lastThenFirstName"},showGravatar:{type:"boolean",default:!1},avatarClass:{type:"string",default:"contact"},avatarSize:{type:"number",default:24},displayOnArchives:{type:"boolean",default:!1}},edit:G,save:function(){return null}});Object(n.registerBlockType)("eventespresso/event-attendees",N)}]);