{"version":3,"sources":["../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/TicketRegistrationsLink.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/cardView/TicketQuantity.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/editable/EditableName.tsx","../domains/core/admin/eventEditor/src/ui/tickets/hooks/useRecalculateBasePrice.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/editable/EditablePrice.tsx","../domains/core/admin/eventEditor/src/ui/tickets/hooks/useTicketsActionMenuItems.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/actionsMenu/TicketActionsMenu.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/tableView/Checkbox.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/tableView/useHeaderRowGenerator.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/tableView/useBodyRowGenerator.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/formValidation.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/useBulkEditFormConfig.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/useSubmitForm.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/details/EditDetails.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/delete/useOnDelete.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/delete/Delete.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/buttons/EditModeButtons.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/buttons/FooterButtons.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editTogether/useOnSubmitPrices.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editTogether/EditTogether.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/TPCInstance.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/useOnSubmit.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/EditSeparately.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/editSeparately/useManageTPCStates.ts","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/prices/EditPrices.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/bulkEdit/actions/Actions.tsx","../domains/core/admin/eventEditor/src/ui/tickets/ticketsList/tableView/TableView.tsx"],"names":["TicketRegistrationsLink","_ref","ticket","regListUrl","useRegistrationsLink","ticket_id","dbId","countTitle","__","tooltip","_jsx","ItemCount","count","registrationCount","emphasizeZero","title","children","RegistrationsLink","href","TicketQuantity","entity","updateEntity","useTicketMutator","id","toaster","useSystemNotifications","getCappedQuantity","useCappedQuantity","onChange","useCallback","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","qty","parsedQuantity","quantity","isQtyAdjustedByCapacity","hasQtyChanged","wrap","_context","prev","next","parseInfinity","ticketId","info","message","stop","_x","apply","arguments","InlineEditInfinity","value","concat","cacheId","EditableName","className","testid","_ref$view","view","lineCount","onChangeName","name","InlineEditText","tag","useRecalculateBasePrice","getTicket","useLazyTicket","getTicketPrices","useTicketPrices","getDataState","useInitialState","defaultBasePrice","useDefaultBasePrice","mutatePrices","useMutatePrices","updateTicket","ticketPrice","_tpcData$ticket","tpcData","updatedTicket","existingBasePrice","priceModifiers","newBasePriceAmount","newBasePrice","newPrices","relatedPriceIds","_objectSpread","price","getBasePrice","prices","getPriceModifiers","calculateBasePrice","isModified","order","isNew","amount","_toConsumableArray","sent","reverseCalculate","EditablePrice","_useMoneyDisplay","useMoneyDisplay","afterAmount","beforeAmount","localizeMoney","parseLocalizedMoney","currency","recalculateBasePrice","onChangePrice","result","Math","abs","parseFloat","toString","_useLockedTicketActio","useLockedTicketAction","alertContainer","showAlert","wrapperProps","useMemoStringify","isTicketLocked","isLocked","pattern","useMemo","maybeDm","decimalMark","maybeTs","thousandsSeparator","ts","test","dm","RegExp","_jsxs","Clickable","as","onClick","CurrencyDisplay","InlineEditCurrency","parseAmount","formatAmount","placeholder","useTicketsActionMenuItems","useEntityActionsMenuItems","TicketActionsMenu","props","_objectWithoutProperties","menuItems","EntityActionsMenu","Checkbox","_useVisibleTicketIds","useVisibleTicketIds","visibleTicketIds","_slicedToArray","ActionCheckbox","visibleEntityIds","useHeaderRowGenerator","canUseBulkEdit","useFeature","stripeCell","key","size","textAlign","idCell","nameCell","startCell","_Fragment","endCell","priceCell","quantityCell","soldCell","registrationsCell","actionsCell","filterState","displayStartOrEndDate","cells","filter","Boolean","filterCellByStartOrEndDate","primary","type","useBodyRowGenerator","tickets","useTickets","findEntityByGuid","getLazyTicket","format","useTimeZoneTime","formatForSite","entityId","bgClassName","getTicketBackgroundColorClassName","statusClassName","ticketStatus","classNames","showValueOnMobile","bulkActionCheckboxCell","parseISO","startDate","ENTITY_LIST_DATE_TIME_FORMAT","endDate","sold","cellsData","R","addZebraStripesOnMobile","bodyRowClassName","rowClassName","validate","values","yupToFinalFormErrors","validationSchema","abrupt","yup","min","unitOptions","intervalsToOptions","DATE_INTERVALS","useBulkEditFormConfig","config","onSubmit","onSubmitFrom","form","_len","length","restParams","Array","_key","adjacentFormItemProps","layout","sections","icon","ProfileOutlined","fields","label","fieldType","CalendarOutlined","formControlProps","subFields","options","ControlOutlined","parseAsInfinity","max","useSubmitForm","onClose","_useBulkEdit","useBulkEdit","getSelected","unSelectAll","allTickets","updateEntities","useBulkEditTickets","formData","input","formToBulkUpdateInput","sharedInput","uniqueInputs","map","uniqueInput","EditDetails","isOpen","formConfig","BulkEditDetails","warning","useOnDelete","areTrashedTickets","bulkDelete","useBulkDeleteTickets","entityIds","deletePermanently","Delete","onDelete","_useConfirmationDialo","useConfirmationDialog","onConfirm","onCancel","confirmationDialog","onOpen","useEffect","EditModeButtons","setEditMode","onClickTogether","onClickSeparate","Box","display","alignItems","justifyContent","height","Button","buttonText","Divider","orientation","FooterButtons","onReset","ButtonRow","fullWidth","horizontalAlign","topBordered","buttonType","ButtonType","PRIMARY","useOnSubmitPrices","_useDataState","useDataState","mutateTicket","useMutateTicket","deletePrices","useBulkDeletePrices","_callee2","relatedPrices","nonDefaultPrices","_context2","reduce","isNotDefault","getGuids","Promise","all","withTPCContext","addDefaultPrices","useAddDefaultPrices","TicketPriceCalculator","TPCInstance","setTPCState","getData","sprintf","useOnSubmit","getDataStates","submitPrices","Object","dataState","EditSeparately","_useManageTPCStates","dataStates","useRef","_dataState$ticket","current","_defineProperty","useManageTPCStates","ticketIds","Instance","EditPrices","_useState","useState","_useState2","editMode","EntityEditModal","closeOnOverlayClick","showAlertOnClose","EditTogether","withCurrentUserCan","USE_EVENT_EDITOR_BULK_EDIT","action","setAction","_useDisclosure","useDisclosure","status","useTicketsListFilterState","isEditPricesDisabled","entitiesWithGuIdInArray","some","TicketsStatus","trashedOnly","disabled","onApply","BulkActions","defaultAction","ErrorMessage","SOLD_TICKET_ERROR_MESSAGE","variant","withBulkEdit","filteredTicketIds","useFilteredTicketIds","sortTickets","useReorderTickets","sortResponder","bodyRowGenerator","headerRowGenerator","BulkEditActions","EntityTable","domain","listId","ticketsList","onSort","tableCaption","tableId"],"mappings":"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","file":"static/js/tickets-table-view.95eb615e.chunk.js","sourcesContent":["import { __ } from '@eventespresso/i18n';\nimport { RegistrationsLink, ItemCount } from '@eventespresso/ui-components';\nimport { useRegistrationsLink } from '@eventespresso/edtr-services';\nimport type { Ticket } from '@eventespresso/edtr-services';\n\ninterface Props {\n\tticket: Ticket;\n}\n\nexport const TicketRegistrationsLink: React.FC<Props> = ({ ticket }) => {\n\tconst regListUrl = useRegistrationsLink({ ticket_id: ticket.dbId });\n\n\tconst countTitle = __('total registrations.');\n\tconst tooltip = __('view ALL registrations for this ticket.');\n\n\treturn (\n\t\t<ItemCount count={ticket.registrationCount} emphasizeZero={false} title={countTitle}>\n\t\t\t<RegistrationsLink href={regListUrl} tooltip={tooltip} />\n\t\t</ItemCount>\n\t);\n};\n","import { useCallback } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\nimport { parseInfinity } from '@eventespresso/utils';\nimport { InlineEditInfinity, InlineEditProps } from '@eventespresso/ui-components';\nimport { useTicketMutator, useCappedQuantity } from '@eventespresso/edtr-services';\nimport { useSystemNotifications } from '@eventespresso/toaster';\n\nimport type { TicketItemProps } from '../types';\n\nconst TicketQuantity: React.FC<TicketItemProps> = ({ entity: ticket }) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst toaster = useSystemNotifications();\n\tconst getCappedQuantity = useCappedQuantity();\n\n\tconst onChange = useCallback<InlineEditProps['onChange']>(\n\t\tasync (qty) => {\n\t\t\tconst parsedQuantity = parseInfinity(qty);\n\n\t\t\tconst quantity = getCappedQuantity({ quantity: parsedQuantity, ticketId: ticket.id });\n\n\t\t\tconst isQtyAdjustedByCapacity = quantity !== parsedQuantity;\n\t\t\tconst hasQtyChanged = quantity !== ticket.quantity;\n\n\t\t\tif (isQtyAdjustedByCapacity) {\n\t\t\t\ttoaster.info({\n\t\t\t\t\tmessage: __(\n\t\t\t\t\t\t'Ticket quantity has been adjusted because it cannot be more than the related event date capacity.'\n\t\t\t\t\t),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (hasQtyChanged || isQtyAdjustedByCapacity) {\n\t\t\t\tawait updateEntity({ quantity });\n\t\t\t}\n\t\t},\n\t\t[getCappedQuantity, ticket.id, ticket.quantity, toaster, updateEntity]\n\t);\n\n\treturn (\n\t\t<InlineEditInfinity\n\t\t\t// Since ticket quantity is restricted by related date capacity\n\t\t\t// it's possible that the quantity has exactly the same value as the min date capacity\n\t\t\t// inline edit uses the internal state to update the value in UI\n\t\t\t// Since the quantity and capacity can be same, it can result in stale value being shown\n\t\t\t// passing a key ensures that UI updates with the correct value\n\t\t\tkey={ticket.cacheId}\n\t\t\tdata-testid='ee-ticket-inline-qty'\n\t\t\tonChange={onChange}\n\t\t\ttooltip={__('edit quantity of tickets available…')}\n\t\t\tvalue={`${ticket.quantity}`}\n\t\t/>\n\t);\n};\n\nexport default TicketQuantity;\n","import { useCallback } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport type { TicketItemProps } from '../types';\nimport { useTicketMutator } from '@eventespresso/edtr-services';\nimport { InlineEditText } from '@eventespresso/ui-components';\n\ninterface EditableNameProps extends TicketItemProps {\n\t'data-testid'?: string;\n\tclassName?: string;\n\tview?: 'card' | 'table';\n}\n\nconst EditableName: React.FC<Partial<EditableNameProps>> = ({\n\tclassName,\n\t'data-testid': testid,\n\tentity: ticket,\n\tview = 'card',\n}) => {\n\tconst { updateEntity } = useTicketMutator(ticket.id);\n\n\tconst lineCount = view === 'card' && 2;\n\n\tconst onChangeName = useCallback(\n\t\t(name: string): void => {\n\t\t\tif (name !== ticket.name) {\n\t\t\t\tupdateEntity({ name });\n\t\t\t}\n\t\t},\n\t\t[ticket.name, updateEntity]\n\t);\n\n\treturn (\n\t\t<InlineEditText\n\t\t\tclassName={className}\n\t\t\tdata-testid={testid}\n\t\t\tlineCount={lineCount}\n\t\t\tonChange={onChangeName}\n\t\t\ttag={view === 'table' ? 'div' : 'h4'}\n\t\t\ttooltip={__('click to edit title…')}\n\t\t\tvalue={ticket.name || __('add title…')}\n\t\t/>\n\t);\n};\n\nexport default EditableName;\n","import { useCallback } from 'react';\n\nimport { EntityId } from '@eventespresso/data';\nimport { calculateBasePrice, useInitialState } from '@eventespresso/tpc';\nimport { getBasePrice, getPriceModifiers } from '@eventespresso/predicates';\nimport { useDefaultBasePrice, useMutatePrices } from '@eventespresso/tpc';\nimport { useLazyTicket, useTicketMutator, useTicketPrices } from '@eventespresso/edtr-services';\n\ntype Callback = (ticketPrice: number) => Promise<void>;\n\nconst useRecalculateBasePrice = (ticketId: EntityId): Callback => {\n\tconst getTicket = useLazyTicket();\n\tconst getTicketPrices = useTicketPrices();\n\t// This will give us the exact state expected by `calculateBasePrice()`\n\tconst getDataState = useInitialState({ ticketId, getTicket, getTicketPrices });\n\t// This default price will be added if there is none\n\tconst defaultBasePrice = useDefaultBasePrice();\n\tconst mutatePrices = useMutatePrices();\n\tconst { updateEntity: updateTicket } = useTicketMutator(ticketId);\n\n\treturn useCallback<Callback>(\n\t\tasync (ticketPrice) => {\n\t\t\tlet tpcData = getDataState(null);\n\t\t\t// Make sure the new ticket price is used\n\t\t\tconst updatedTicket = { ...tpcData.ticket, price: ticketPrice };\n\t\t\ttpcData = { ...tpcData, ticket: updatedTicket };\n\n\t\t\tconst existingBasePrice = getBasePrice(tpcData.prices);\n\t\t\tconst priceModifiers = getPriceModifiers(tpcData.prices);\n\t\t\t// get the updated base price amount\n\t\t\tconst newBasePriceAmount = calculateBasePrice(tpcData.ticket?.price, tpcData.prices);\n\n\t\t\t// if the ticket does not have a base price,\n\t\t\t// that means it was free and now a price has been added ¯\\_(ツ)_/¯\n\t\t\tconst newBasePrice = existingBasePrice\n\t\t\t\t? // add the exiting base price\n\t\t\t\t\t{ ...existingBasePrice, isModified: true }\n\t\t\t\t: // add the default price\n\t\t\t\t\t{ ...defaultBasePrice, order: 1, isNew: true };\n\n\t\t\tconst newPrices = [\n\t\t\t\t// update the base price amount\n\t\t\t\t{ ...newBasePrice, amount: newBasePriceAmount },\n\t\t\t\t// add the existing ones, just in case we are dealing with aliens,\n\t\t\t\t// don't get me wrong, because only they can have other prices without a base price,\n\t\t\t\t// may be their taxation system works differently, who knows ¯\\_(ツ)_/¯\n\t\t\t\t...priceModifiers,\n\t\t\t];\n\n\t\t\tconst relatedPriceIds = await mutatePrices(newPrices);\n\n\t\t\tawait updateTicket({\n\t\t\t\t// this is the ticket prices amount\n\t\t\t\tprice: ticketPrice,\n\t\t\t\t// since ticket price has been changed, we need to go in reverse gear ◀️\n\t\t\t\treverseCalculate: true,\n\t\t\t\t// Make sure related prices are updated\n\t\t\t\tprices: relatedPriceIds,\n\t\t\t});\n\t\t},\n\t\t[defaultBasePrice, getDataState, mutatePrices, updateTicket]\n\t);\n};\n\nexport default useRecalculateBasePrice;\n","import { useCallback, useMemo } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\nimport { Clickable } from '@eventespresso/adapters';\nimport { InlineEditCurrency } from '@eventespresso/ui-components';\nimport { CurrencyDisplay } from '@eventespresso/ee-components';\nimport { useMemoStringify } from '@eventespresso/hooks';\nimport { useMoneyDisplay } from '@eventespresso/services';\nimport { isLocked } from '@eventespresso/predicates';\nimport { useLockedTicketAction } from '@eventespresso/tpc';\nimport useRecalculateBasePrice from '../../hooks/useRecalculateBasePrice';\n\nimport type { InlineEditCurrencyProps } from '@eventespresso/ui-components';\nimport type { TicketItemProps } from '../types';\n\nimport './style.scss';\n\ninterface EditablePriceProps extends TicketItemProps {\n\tclassName?: string;\n}\n\nconst EditablePrice: React.FC<Partial<EditablePriceProps>> = ({ entity: ticket, className }) => {\n\tconst { afterAmount, beforeAmount, localizeMoney, parseLocalizedMoney, currency } = useMoneyDisplay();\n\n\tconst recalculateBasePrice = useRecalculateBasePrice(ticket.id);\n\n\tconst onChangePrice = useCallback<InlineEditCurrencyProps['onChange']>(\n\t\t(result) => {\n\t\t\tif (result && 'amount' in result) {\n\t\t\t\tconst price = Math.abs(parseFloat(result.amount.toString()));\n\t\t\t\tif (price !== ticket.price) {\n\t\t\t\t\trecalculateBasePrice(price);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[recalculateBasePrice, ticket.price]\n\t);\n\n\tconst { alertContainer, showAlert } = useLockedTicketAction(ticket, 'COPY/TRASH');\n\n\tconst wrapperProps = useMemoStringify({ className });\n\n\tconst isTicketLocked = isLocked(ticket);\n\n\tconst tooltip = __('edit ticket total…');\n\n\tconst pattern = useMemo<RegExp>(() => {\n\t\tconst { decimalMark: maybeDm, thousandsSeparator: maybeTs } = currency;\n\t\tconst ts = /\\s/.test(maybeTs) ? '\\\\s' : maybeTs;\n\t\t/* eslint-disable-next-line no-useless-escape */\n\t\tconst dm = maybeDm === '.' ? '\\.' : maybeDm;\n\t\t// ^[0-9,]*\\.?[0-9]{0,3} where ',' is ts, '.' is dm, and 3d.p.\n\t\treturn new RegExp(`^[0-9${ts}]*${dm}?[0-9]{0,6}$`);\n\t}, [currency]);\n\n\treturn isTicketLocked ? (\n\t\t<Clickable as='div' className='ee-ticket-editable-price' onClick={showAlert}>\n\t\t\t<CurrencyDisplay className={className} value={ticket.price} />\n\t\t\t{alertContainer}\n\t\t</Clickable>\n\t) : (\n\t\t<InlineEditCurrency\n\t\t\tafterAmount={afterAmount}\n\t\t\tamount={ticket.price}\n\t\t\tbeforeAmount={beforeAmount}\n\t\t\tpattern={pattern}\n\t\t\tparseAmount={parseLocalizedMoney}\n\t\t\tformatAmount={localizeMoney}\n\t\t\tid={ticket.id}\n\t\t\tplaceholder={__('set price…')}\n\t\t\twrapperProps={wrapperProps}\n\t\t\tonChange={onChangePrice}\n\t\t\ttag={'h3'}\n\t\t\ttooltip={tooltip}\n\t\t/>\n\t);\n};\n\nexport default EditablePrice;\n","import { Ticket } from '@eventespresso/edtr-services';\nimport { useEntityActionsMenuItems } from '@edtrHooks/index';\n\nconst useTicketsActionMenuItems = (ticket: Ticket): Array<React.ReactNode> => {\n\treturn useEntityActionsMenuItems('ticket', ticket);\n};\n\nexport default useTicketsActionMenuItems;\n","import { EntityActionsMenu } from '@eventespresso/ui-components';\nimport type { ActionsMenuComponentProps } from '@eventespresso/registry';\nimport type { Ticket } from '@eventespresso/edtr-services';\n\nimport useTicketsActionMenuItems from '../../hooks/useTicketsActionMenuItems';\n\nconst TicketActionsMenu: React.FC<ActionsMenuComponentProps<Ticket>> = ({ entity, ...props }) => {\n\tconst menuItems = useTicketsActionMenuItems(entity);\n\n\treturn <EntityActionsMenu {...props} menuItems={menuItems} />;\n};\n\nexport default TicketActionsMenu;\n","import { ActionCheckbox } from '@eventespresso/ee-components';\nimport { useVisibleTicketIds } from '@eventespresso/edtr-services';\nimport type { ActionCheckboxProps } from '@eventespresso/ee-components';\n\nconst Checkbox: React.FC<ActionCheckboxProps> = (props) => {\n\tconst [visibleTicketIds] = useVisibleTicketIds();\n\n\treturn <ActionCheckbox {...props} visibleEntityIds={visibleTicketIds} />;\n};\n\nexport default Checkbox;\n","import { useCallback, useMemo } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\nimport { filterCellByStartOrEndDate } from '@eventespresso/edtr-services';\nimport { useFeature } from '@eventespresso/services';\n\nimport type { CellData } from '@eventespresso/ui-components';\nimport type { HeaderRowGeneratorFn } from '@eventespresso/ee-components';\nimport type { TicketsFilterStateManager } from '@eventespresso/edtr-services';\n\nimport Checkbox from './Checkbox';\n\ntype TicketsTableHeaderRowGen = HeaderRowGeneratorFn<TicketsFilterStateManager>;\n\nconst useHeaderRowGenerator = (): TicketsTableHeaderRowGen => {\n\tconst canUseBulkEdit = useFeature('ee_event_editor_bulk_edit');\n\tconst stripeCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tclassName: 'ee-entity-list-status-stripe',\n\t\t\tkey: 'stripe',\n\t\t\tsize: 'nano',\n\t\t\ttextAlign: 'center',\n\t\t\tvalue: '',\n\t\t}),\n\t\t[]\n\t);\n\n\tconst idCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'id',\n\t\t\tsize: 'micro',\n\t\t\ttextAlign: 'end',\n\t\t\tvalue: __('ID'),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst nameCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'name',\n\t\t\tsize: 'huge',\n\t\t\tvalue: __('Name'),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst startCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'start',\n\t\t\tsize: 'default',\n\t\t\tvalue: (\n\t\t\t\t<>\n\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Goes on Sale')}</span>\n\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('On Sale')}</span>\n\t\t\t\t</>\n\t\t\t),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst endCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'end',\n\t\t\tsize: 'default',\n\t\t\tvalue: (\n\t\t\t\t<>\n\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Sale Ends')}</span>\n\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('Ends')}</span>\n\t\t\t\t</>\n\t\t\t),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst priceCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'price',\n\t\t\tsize: 'tiny',\n\t\t\ttextAlign: 'end',\n\t\t\tvalue: __('Price'),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst quantityCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'quantity',\n\t\t\tsize: 'tiny',\n\t\t\ttextAlign: 'end',\n\t\t\tvalue: __('Qty'),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst soldCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'sold',\n\t\t\tsize: 'tiny',\n\t\t\ttextAlign: 'end',\n\t\t\tvalue: __('Sold'),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst registrationsCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'registrations',\n\t\t\tsize: 'smaller',\n\t\t\ttextAlign: 'center',\n\t\t\tvalue: __('Reg List'),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst actionsCell: CellData = useMemo(\n\t\t() => ({\n\t\t\tkey: 'actions',\n\t\t\tsize: 'big',\n\t\t\ttextAlign: 'center',\n\t\t\tvalue: (\n\t\t\t\t<>\n\t\t\t\t\t<span className={'ee-rspnsv-table-long-label'}>{__('Actions')}</span>\n\t\t\t\t\t<span className={'ee-rspnsv-table-short-label'}>{__('Actions')}</span>\n\t\t\t\t</>\n\t\t\t),\n\t\t}),\n\t\t[]\n\t);\n\n\treturn useCallback<TicketsTableHeaderRowGen>(\n\t\t(filterState) => {\n\t\t\tconst { displayStartOrEndDate } = filterState;\n\n\t\t\tconst checkboxCell: CellData = canUseBulkEdit && {\n\t\t\t\tkey: 'checkbox',\n\t\t\t\tsize: 'micro',\n\t\t\t\ttextAlign: 'center',\n\t\t\t\tvalue: (\n\t\t\t\t\t<div className={'ee-rspnsv-table-hide-on-mobile'}>\n\t\t\t\t\t\t<Checkbox />\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t};\n\n\t\t\tconst cellsData: Array<CellData> = [\n\t\t\t\tstripeCell,\n\t\t\t\tcheckboxCell,\n\t\t\t\tidCell,\n\t\t\t\tnameCell,\n\t\t\t\tstartCell,\n\t\t\t\tendCell,\n\t\t\t\tpriceCell,\n\t\t\t\tquantityCell,\n\t\t\t\tsoldCell,\n\t\t\t\tregistrationsCell,\n\t\t\t\tactionsCell,\n\t\t\t];\n\n\t\t\tconst cells = cellsData\n\t\t\t\t.filter(\n\t\t\t\t\t// removes falsy values\n\t\t\t\t\tBoolean\n\t\t\t\t)\n\t\t\t\t.filter(filterCellByStartOrEndDate(displayStartOrEndDate));\n\n\t\t\treturn {\n\t\t\t\tcells,\n\t\t\t\tclassName: 'ee-editor-ticket-list-items-header-row',\n\t\t\t\tkey: 'ticket-header-row',\n\t\t\t\tprimary: true,\n\t\t\t\ttype: 'row',\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tidCell,\n\t\t\tactionsCell,\n\t\t\tcanUseBulkEdit,\n\t\t\tendCell,\n\t\t\tnameCell,\n\t\t\tpriceCell,\n\t\t\tquantityCell,\n\t\t\tregistrationsCell,\n\t\t\tsoldCell,\n\t\t\tstartCell,\n\t\t\tstripeCell,\n\t\t]\n\t);\n};\n\nexport default useHeaderRowGenerator;\n","import { useCallback } from 'react';\nimport classNames from 'classnames';\nimport { parseISO } from 'date-fns';\nimport * as R from 'ramda';\n\nimport { addZebraStripesOnMobile, CellData } from '@eventespresso/ui-components';\nimport { CurrencyDisplay } from '@eventespresso/ee-components';\nimport { filterCellByStartOrEndDate, useTickets, useLazyTicket } from '@eventespresso/edtr-services';\nimport { ENTITY_LIST_DATE_TIME_FORMAT } from '@eventespresso/constants';\nimport { useFeature, useTimeZoneTime } from '@eventespresso/services';\nimport { getTicketBackgroundColorClassName, ticketStatus } from '@eventespresso/helpers';\nimport { findEntityByGuid } from '@eventespresso/predicates';\nimport TicketActionsMenu from '@edtrUI/tickets/ticketsList/actionsMenu/TicketActionsMenu';\nimport TicketQuantity from '../cardView/TicketQuantity';\nimport { EditableName } from '../editable';\nimport { TicketRegistrationsLink } from '../TicketRegistrationsLink';\nimport Checkbox from './Checkbox';\n\nimport type { EntityId } from '@eventespresso/data';\nimport type { BodyRowGeneratorFn } from '@eventespresso/ee-components';\nimport type { TicketsFilterStateManager } from '@eventespresso/edtr-services';\n\ntype TicketsTableBodyRowGen = BodyRowGeneratorFn<TicketsFilterStateManager>;\n\nconst useBodyRowGenerator = (): TicketsTableBodyRowGen => {\n\tconst tickets = useTickets();\n\tconst getTicket = useCallback((id: EntityId) => findEntityByGuid(tickets)(id), [tickets]);\n\tconst getLazyTicket = useLazyTicket();\n\tconst canUseBulkEdit = useFeature('ee_event_editor_bulk_edit');\n\tconst { formatForSite: format } = useTimeZoneTime();\n\n\treturn useCallback<TicketsTableBodyRowGen>(\n\t\t({ entityId, filterState }) => {\n\t\t\tconst ticket = getTicket(entityId) || getLazyTicket(entityId);\n\t\t\tconst { displayStartOrEndDate } = filterState;\n\n\t\t\tconst bgClassName = getTicketBackgroundColorClassName(ticket);\n\t\t\tconst id = ticket.dbId || 0;\n\t\t\tconst statusClassName = ticketStatus(ticket);\n\n\t\t\tconst stripeCell: CellData = {\n\t\t\t\tclassName: classNames('ee-entity-list-status-stripe', bgClassName),\n\t\t\t\tkey: 'stripe',\n\t\t\t\tshowValueOnMobile: true,\n\t\t\t\ttextAlign: 'center',\n\t\t\t\tvalue: ticket.name,\n\t\t\t};\n\n\t\t\tconst bulkActionCheckboxCell: CellData = canUseBulkEdit && {\n\t\t\t\tkey: 'cell',\n\t\t\t\tsize: 'micro',\n\t\t\t\ttextAlign: 'center',\n\t\t\t\tvalue: <Checkbox dbId={ticket.dbId} id={ticket.id} />,\n\t\t\t};\n\n\t\t\tconst idCell: CellData = {\n\t\t\t\tkey: 'id',\n\t\t\t\tsize: 'micro',\n\t\t\t\ttextAlign: 'end',\n\t\t\t\tvalue: id,\n\t\t\t};\n\n\t\t\tconst nameCell: CellData = {\n\t\t\t\tclassName: 'ee-col-name ee-rspnsv-table-hide-on-mobile',\n\t\t\t\tkey: 'name',\n\t\t\t\tsize: 'huge',\n\t\t\t\tvalue: (\n\t\t\t\t\t<EditableName\n\t\t\t\t\t\tclassName='ee-entity-name ee-entity-list-text ee-focus-priority-5'\n\t\t\t\t\t\tdata-testid={`ee-entity-list-view-row-editable-${ticket.dbId}`}\n\t\t\t\t\t\tentity={ticket}\n\t\t\t\t\t\tview='table'\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t};\n\n\t\t\tconst startCell: CellData = {\n\t\t\t\tkey: 'start',\n\t\t\t\tsize: 'default',\n\t\t\t\tvalue: format(parseISO(ticket.startDate), ENTITY_LIST_DATE_TIME_FORMAT),\n\t\t\t};\n\n\t\t\tconst endCell: CellData = {\n\t\t\t\tkey: 'end',\n\t\t\t\tsize: 'default',\n\t\t\t\tvalue: format(parseISO(ticket.endDate), ENTITY_LIST_DATE_TIME_FORMAT),\n\t\t\t};\n\n\t\t\tconst priceCell: CellData = {\n\t\t\t\tkey: 'price',\n\t\t\t\tsize: 'tiny',\n\t\t\t\ttextAlign: 'end',\n\t\t\t\tvalue: <CurrencyDisplay value={ticket.price} />,\n\t\t\t};\n\n\t\t\tconst soldCell: CellData = {\n\t\t\t\tkey: 'sold',\n\t\t\t\tsize: 'tiny',\n\t\t\t\ttextAlign: 'end',\n\t\t\t\tvalue: ticket.sold,\n\t\t\t};\n\n\t\t\tconst quantityCell: CellData = {\n\t\t\t\tclassName: 'ee-col__inline-edit',\n\t\t\t\tkey: 'quantity',\n\t\t\t\tsize: 'tiny',\n\t\t\t\ttextAlign: 'end',\n\t\t\t\tvalue: <TicketQuantity entity={ticket} />,\n\t\t\t};\n\n\t\t\tconst registrationsCell: CellData = {\n\t\t\t\tkey: 'registrations',\n\t\t\t\tsize: 'smaller',\n\t\t\t\ttextAlign: 'center',\n\t\t\t\tvalue: <TicketRegistrationsLink ticket={ticket} />,\n\t\t\t};\n\n\t\t\tconst actionsCell: CellData = {\n\t\t\t\tkey: 'actions',\n\t\t\t\tsize: 'big',\n\t\t\t\ttextAlign: 'center',\n\t\t\t\tvalue: <TicketActionsMenu entity={ticket} />,\n\t\t\t};\n\n\t\t\tconst cellsData: Array<CellData> = [\n\t\t\t\tstripeCell,\n\t\t\t\tbulkActionCheckboxCell,\n\t\t\t\tidCell,\n\t\t\t\tnameCell,\n\t\t\t\tstartCell,\n\t\t\t\tendCell,\n\t\t\t\tpriceCell,\n\t\t\t\tquantityCell,\n\t\t\t\tsoldCell,\n\t\t\t\tregistrationsCell,\n\t\t\t\tactionsCell,\n\t\t\t].filter(\n\t\t\t\t// removes falsy values\n\t\t\t\tBoolean\n\t\t\t);\n\n\t\t\tconst exclude = ['row', 'stripe', 'name', 'actions'];\n\n\t\t\tconst cells = R.pipe(\n\t\t\t\tR.filter(filterCellByStartOrEndDate(displayStartOrEndDate)),\n\t\t\t\taddZebraStripesOnMobile(exclude)\n\t\t\t)(cellsData);\n\n\t\t\treturn {\n\t\t\t\tcells,\n\t\t\t\tclassName: { bodyRowClassName: `ee-editor-ticket-list-view-row ${statusClassName}` },\n\t\t\t\t'data-testid': `ee-ticket-list-view-row-${ticket.dbId}`,\n\t\t\t\tid: `ee-editor-ticket-list-view-row-${ticket.id}`,\n\t\t\t\tkey: `row-${ticket.id}`,\n\t\t\t\trowClassName: 'ee-entity-list-item',\n\t\t\t\ttype: 'row',\n\t\t\t};\n\t\t},\n\t\t[canUseBulkEdit, format, getLazyTicket, getTicket]\n\t);\n};\n\nexport default useBodyRowGenerator;\n","import { __ } from '@eventespresso/i18n';\nimport * as yup from 'yup';\n\nimport { yupToFinalFormErrors } from '@eventespresso/form';\nimport { BulkEditFormShape } from './types';\n\nexport const validate = async (values: BulkEditFormShape): Promise<any> => {\n\treturn await yupToFinalFormErrors(validationSchema, values);\n};\n\nconst validationSchema = yup.object({\n\tname: yup.string().min(3, () => __('Name must be at least three characters')),\n});\n","import { __ } from '@eventespresso/i18n';\nimport * as R from 'ramda';\nimport { useCallback, useMemo } from 'react';\n\nimport { DATE_INTERVALS, Intervals, intervalsToOptions } from '@eventespresso/dates';\nimport type { EspressoFormProps } from '@eventespresso/form';\nimport { CalendarOutlined, ControlOutlined, ProfileOutlined } from '@eventespresso/icons';\n\nimport { useMemoStringify } from '@eventespresso/hooks';\nimport { validate } from './formValidation';\nimport type { BulkEditFormShape } from './types';\n\ntype DateFormConfig = EspressoFormProps<BulkEditFormShape>;\n\nconst unitOptions = intervalsToOptions(\n\tR.pick<Intervals, keyof Intervals>(['months', 'weeks', 'days', 'hours', 'minutes'], DATE_INTERVALS),\n\ttrue\n);\n\nconst useBulkEditFormConfig = (config?: EspressoFormProps<BulkEditFormShape>): DateFormConfig => {\n\tconst { onSubmit } = config;\n\n\tconst onSubmitFrom: DateFormConfig['onSubmit'] = useCallback(\n\t\t(values, form, ...restParams) => {\n\t\t\treturn onSubmit(values, form, ...restParams);\n\t\t},\n\t\t[onSubmit]\n\t);\n\n\tconst adjacentFormItemProps = useMemoStringify({\n\t\tclassName: 'ee-form-item-pair',\n\t});\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...config,\n\t\t\tonSubmit: onSubmitFrom,\n\t\t\tvalidate,\n\t\t\tlayout: 'horizontal',\n\t\t\tsections: [\n\t\t\t\t{\n\t\t\t\t\tname: 'basics',\n\t\t\t\t\ticon: ProfileOutlined,\n\t\t\t\t\ttitle: __('Basics'),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'name',\n\t\t\t\t\t\t\tlabel: __('Name'),\n\t\t\t\t\t\t\tfieldType: 'text',\n\t\t\t\t\t\t\tmin: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'description',\n\t\t\t\t\t\t\tlabel: __('Description'),\n\t\t\t\t\t\t\tfieldType: 'simple-text-editor',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'dates',\n\t\t\t\t\ticon: CalendarOutlined,\n\t\t\t\t\ttitle: __('Dates'),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'shiftDates',\n\t\t\t\t\t\t\tlabel: __('Shift dates'),\n\t\t\t\t\t\t\tfieldType: 'group',\n\t\t\t\t\t\t\tformControlProps: {\n\t\t\t\t\t\t\t\tclassName: 'shift-dates',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsubFields: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'value',\n\t\t\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'unit',\n\t\t\t\t\t\t\t\t\tfieldType: 'select',\n\t\t\t\t\t\t\t\t\toptions: unitOptions,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: 'type',\n\t\t\t\t\t\t\t\t\tfieldType: 'select',\n\t\t\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: __('earlier'),\n\t\t\t\t\t\t\t\t\t\t\tvalue: 'earlier',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: __('later'),\n\t\t\t\t\t\t\t\t\t\t\tvalue: 'later',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'details',\n\t\t\t\t\ticon: ControlOutlined,\n\t\t\t\t\ttitle: __('Details'),\n\t\t\t\t\tfields: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'quantity',\n\t\t\t\t\t\t\tlabel: __('Quantity For Sale'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tparseAsInfinity: true,\n\t\t\t\t\t\t\tmax: 1000000,\n\t\t\t\t\t\t\tmin: -1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'uses',\n\t\t\t\t\t\t\tlabel: __('Number of Uses'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tparseAsInfinity: true,\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'min',\n\t\t\t\t\t\t\tlabel: __('Minimum Quantity'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tmax: 1000000,\n\t\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'max',\n\t\t\t\t\t\t\tlabel: __('Maximum Quantity'),\n\t\t\t\t\t\t\tfieldType: 'number',\n\t\t\t\t\t\t\tparseAsInfinity: true,\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t\tmax: 1000000,\n\t\t\t\t\t\t\tmin: -1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'isRequired',\n\t\t\t\t\t\t\tlabel: __('Required Ticket'),\n\t\t\t\t\t\t\tfieldType: 'switch',\n\t\t\t\t\t\t\tformControlProps: adjacentFormItemProps,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t}),\n\t\t[adjacentFormItemProps, config, onSubmitFrom]\n\t);\n};\n\nexport default useBulkEditFormConfig;\n","import { useCallback } from 'react';\n\nimport { useBulkEdit } from '@eventespresso/services';\nimport { useTickets, useBulkEditTickets, formToBulkUpdateInput, useCappedQuantity } from '@eventespresso/edtr-services';\n\nimport type { BulkEditFormShape } from './types';\n\ntype Callback = (values: BulkEditFormShape) => Promise<void>;\n\nconst useSubmitForm = (onClose: VoidFunction): Callback => {\n\tconst { getSelected, unSelectAll } = useBulkEdit();\n\tconst allTickets = useTickets();\n\tconst { updateEntities } = useBulkEditTickets();\n\tconst getCappedQuantity = useCappedQuantity();\n\n\treturn useCallback<Callback>(\n\t\tasync (formData) => {\n\t\t\t// pull the shutter down\n\t\t\tonClose();\n\t\t\t// prepare mutation input from data\n\t\t\tconst input = formToBulkUpdateInput(formData, allTickets, getSelected());\n\n\t\t\t// if quantity is changed\n\t\t\tif ('quantity' in input.sharedInput) {\n\t\t\t\t// restrict quantity by related date capacity\n\t\t\t\tinput.uniqueInputs = input.uniqueInputs.map((uniqueInput) => {\n\t\t\t\t\tconst quantity = getCappedQuantity({\n\t\t\t\t\t\tquantity: input.sharedInput.quantity,\n\t\t\t\t\t\tticketId: uniqueInput.id,\n\t\t\t\t\t});\n\n\t\t\t\t\treturn { ...uniqueInput, quantity };\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// back to basics\n\t\t\tunSelectAll();\n\t\t\t// do the thing\n\t\t\tawait updateEntities(input);\n\t\t},\n\t\t[allTickets, getCappedQuantity, getSelected, onClose, unSelectAll, updateEntities]\n\t);\n};\n\nexport default useSubmitForm;\n","import { __ } from '@eventespresso/i18n';\n\nimport { BulkEditDetails } from '@eventespresso/ee-components';\nimport useBulkEditFormConfig from './useBulkEditFormConfig';\nimport useSubmitForm from './useSubmitForm';\n\ntype EditDetailsProps = {\n\tisOpen: boolean;\n\tonClose: VoidFunction;\n};\n\nconst EditDetails: React.FC<EditDetailsProps> = ({ onClose, isOpen }) => {\n\tconst onSubmit = useSubmitForm(onClose);\n\tconst formConfig = useBulkEditFormConfig({ onSubmit });\n\n\treturn (\n\t\t<BulkEditDetails\n\t\t\tformConfig={formConfig}\n\t\t\tisOpen={isOpen}\n\t\t\tonClose={onClose}\n\t\t\ttitle={__('Bulk edit ticket details')}\n\t\t\twarning={__('any changes will be applied to ALL of the selected tickets.')}\n\t\t/>\n\t);\n};\n\nexport default EditDetails;\n","import { useCallback } from 'react';\n\nimport { useBulkEdit } from '@eventespresso/services';\nimport { useBulkDeleteTickets } from '@eventespresso/edtr-services';\n\nimport type { OnDeleteProps } from './types';\n\ntype OnDelete = (props: OnDeleteProps) => VoidFunction;\n\nconst useOnDelete: OnDelete = ({ areTrashedTickets, onClose }) => {\n\tconst { getSelected, unSelectAll } = useBulkEdit();\n\tconst bulkDelete = useBulkDeleteTickets();\n\treturn useCallback<VoidFunction>(() => {\n\t\t// pull the shutter down\n\t\tonClose();\n\t\t// back to basics\n\t\tunSelectAll();\n\n\t\t// goodbye folks :wave:\n\t\tbulkDelete({ entityIds: getSelected(), deletePermanently: areTrashedTickets });\n\t}, [areTrashedTickets, bulkDelete, getSelected, onClose, unSelectAll]);\n};\n\nexport default useOnDelete;\n","import { useEffect } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport { useConfirmationDialog } from '@eventespresso/ui-components';\nimport useOnDelete from './useOnDelete';\nimport { OnDeleteProps } from './types';\n\nconst Delete: React.FC<OnDeleteProps> = ({ areTrashedTickets, onClose }) => {\n\tconst onDelete = useOnDelete({ areTrashedTickets, onClose });\n\n\tconst { confirmationDialog, onOpen } = useConfirmationDialog({\n\t\tmessage: areTrashedTickets\n\t\t\t? __('Are you sure you want to permanently delete these tickets? This action can NOT be undone!')\n\t\t\t: __('Are you sure you want to trash these tickets?'),\n\t\ttitle: areTrashedTickets ? __('Delete tickets permanently') : __('Trash tickets'),\n\t\tonConfirm: onDelete,\n\t\tonCancel: onClose,\n\t});\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tuseEffect(() => onOpen(), []);\n\n\treturn <>{confirmationDialog}</>;\n};\n\nexport default Delete;\n","import { useCallback } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport { Button, Divider } from '@eventespresso/ui-components';\nimport { Box } from '@eventespresso/adapters';\nimport type { EditMode } from '../types';\n\nexport interface EditModeButtonsProps {\n\tsetEditMode: (editMode: EditMode) => void;\n}\n\nexport const EditModeButtons: React.FC<EditModeButtonsProps> = ({ setEditMode }) => {\n\tconst onClickTogether = useCallback(() => setEditMode('together'), [setEditMode]);\n\tconst onClickSeparate = useCallback(() => setEditMode('separate'), [setEditMode]);\n\n\treturn (\n\t\t<Box display='flex' alignItems='center' justifyContent='center' height='100%'>\n\t\t\t<Box>\n\t\t\t\t<Button onClick={onClickTogether} buttonText={__('Edit all prices together')} />\n\t\t\t\t<p>{__('Edit all the selected ticket prices dynamically')}</p>\n\t\t\t</Box>\n\t\t\t<Divider orientation='vertical' />\n\t\t\t<Box>\n\t\t\t\t<Button onClick={onClickSeparate} buttonText={__('Edit prices individually')} />\n\t\t\t\t<p>{__('Edit prices for each ticket individually')}</p>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n","import { __ } from '@eventespresso/i18n';\n\nimport { Button, ButtonRow, ButtonType } from '@eventespresso/ui-components';\n\nexport interface FooterButtonsProps {\n\tonSubmit: VoidFunction;\n\tonReset?: VoidFunction;\n\tonCancel?: VoidFunction;\n}\n\nexport const FooterButtons: React.FC<FooterButtonsProps> = ({ onSubmit, onReset, onCancel }) => {\n\treturn (\n\t\t<ButtonRow fullWidth horizontalAlign='right' topBordered>\n\t\t\t{onReset && <Button buttonText={__('Reset')} onClick={onReset} type='reset' />}\n\t\t\t{onCancel && <Button buttonText={__('Cancel')} onClick={onCancel} />}\n\t\t\t<Button buttonText={__('Submit')} buttonType={ButtonType.PRIMARY} onClick={onSubmit} type='submit' />\n\t\t</ButtonRow>\n\t);\n};\n","import { useCallback } from 'react';\n\nimport { Price, useTicketPrices, useBulkDeletePrices } from '@eventespresso/edtr-services';\nimport { useDataState, useMutateTicket } from '@eventespresso/tpc';\nimport { isNotDefault, getGuids } from '@eventespresso/predicates';\nimport { useBulkEdit } from '@eventespresso/services';\n\nconst useOnSubmitPrices = (onClose: VoidFunction): (() => Promise<void>) => {\n\tconst { prices, ticket } = useDataState();\n\tconst { getSelected } = useBulkEdit();\n\n\tconst mutateTicket = useMutateTicket();\n\n\tconst getTicketPrices = useTicketPrices();\n\n\tconst deletePrices = useBulkDeletePrices();\n\n\t// Async to make sure that prices are handled before updating the ticket.\n\treturn useCallback(async () => {\n\t\t// lower down the curtains\n\t\tonClose();\n\n\t\t// prices related to all the selected tickets\n\t\tconst relatedPrices = getSelected().reduce<Price[]>(\n\t\t\t(prices, ticketId) => [...prices, ...getTicketPrices(ticketId)],\n\t\t\t[]\n\t\t);\n\n\t\t// prices may contain default taxes,\n\t\t// we need to make sure they are not deleted.\n\t\tconst nonDefaultPrices = relatedPrices.filter(isNotDefault);\n\t\t// delete all non-default prices\n\t\tawait deletePrices(getGuids(nonDefaultPrices));\n\n\t\t// tickets/prices can be mutated in parallel\n\t\tawait Promise.all(\n\t\t\t// loop through all the selected tickets and update thei price information\n\t\t\tgetSelected().map(async (ticketId) => {\n\t\t\t\tawait mutateTicket({\n\t\t\t\t\t...ticket,\n\t\t\t\t\tid: ticketId,\n\t\t\t\t\tisModified: true,\n\t\t\t\t\tprices,\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}, [deletePrices, getSelected, getTicketPrices, mutateTicket, onClose, prices, ticket]);\n};\n\nexport default useOnSubmitPrices;\n","import { useEffect } from 'react';\n\nimport { TicketPriceCalculator, useAddDefaultPrices, withContext as withTPCContext } from '@eventespresso/tpc';\n\nimport { FooterButtons } from '../buttons';\nimport { EditPricesBaseProps } from '../types';\nimport useOnSubmitPrices from './useOnSubmitPrices';\n\nconst EditTogether: React.FC<EditPricesBaseProps> = ({ onClose }) => {\n\tconst addDefaultPrices = useAddDefaultPrices();\n\t// add default prices on mount\n\tuseEffect(() => {\n\t\taddDefaultPrices();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tconst onSubmit = useOnSubmitPrices(onClose);\n\n\treturn (\n\t\t<>\n\t\t\t<TicketPriceCalculator />\n\t\t\t<FooterButtons onSubmit={onSubmit} onReset={addDefaultPrices} />\n\t\t</>\n\t);\n};\n\nexport default withTPCContext(EditTogether, { ticketId: '' });\n","import { useEffect } from 'react';\n\nimport { __, sprintf } from '@eventespresso/i18n';\n\nimport { TicketPriceCalculator, useDataState } from '@eventespresso/tpc';\nimport { ManageTPCStates } from './useManageTPCStates';\n\nexport interface TPCInstanceProps {\n\tsetTPCState: ManageTPCStates['setTPCState'];\n}\n\nexport const TPCInstance: React.FC<TPCInstanceProps> = ({ setTPCState }) => {\n\tconst { ticket, getData } = useDataState();\n\n\tuseEffect(() => {\n\t\tsetTPCState(getData());\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [getData]);\n\n\treturn (\n\t\t<>\n\t\t\t<header>\n\t\t\t\t{sprintf(\n\t\t\t\t\t/* translators: %s ticket name */\n\t\t\t\t\t__('Edit prices for Ticket: %s'),\n\t\t\t\t\tticket.name\n\t\t\t\t)}\n\t\t\t</header>\n\t\t\t<TicketPriceCalculator />\n\t\t</>\n\t);\n};\n","import { useCallback } from 'react';\n\nimport { useOnSubmitPrices } from '@eventespresso/tpc';\nimport { ManageTPCStates } from './useManageTPCStates';\n\nconst useOnSubmit = (onClose: VoidFunction, getDataStates: ManageTPCStates['getDataStates']): (() => Promise<void>) => {\n\tconst submitPrices = useOnSubmitPrices();\n\n\treturn useCallback(async () => {\n\t\t// lower down the curtains\n\t\tonClose();\n\n\t\t// tickets/prices can be mutated in parallel\n\t\tawait Promise.all(\n\t\t\t// loop through all the selected tickets and update their price information\n\t\t\tObject.values(getDataStates()).map(async (dataState) => {\n\t\t\t\t// Finally update the ticket and its price relation\n\t\t\t\tawait submitPrices(dataState);\n\t\t\t})\n\t\t);\n\t}, [getDataStates, onClose, submitPrices]);\n};\n\nexport default useOnSubmit;\n","import { withContext as withTPCContext } from '@eventespresso/tpc';\nimport { useBulkEdit } from '@eventespresso/services';\n\nimport { EditPricesBaseProps } from '../types';\nimport { TPCInstance } from './TPCInstance';\nimport { FooterButtons } from '../buttons';\nimport { useManageTPCStates } from './useManageTPCStates';\nimport useOnSubmit from './useOnSubmit';\n\nconst EditSeparately: React.FC<EditPricesBaseProps> = ({ onClose }) => {\n\tconst { getSelected } = useBulkEdit();\n\n\tconst { getDataStates, setTPCState } = useManageTPCStates();\n\n\tconst onSubmit = useOnSubmit(onClose, getDataStates);\n\n\tconst ticketIds = getSelected();\n\n\treturn (\n\t\t<>\n\t\t\t{ticketIds.map<React.ReactNode>((ticketId) => {\n\t\t\t\tconst Instance = withTPCContext(TPCInstance, { ticketId });\n\t\t\t\treturn <Instance key={ticketId} setTPCState={setTPCState} />;\n\t\t\t})}\n\t\t\t<FooterButtons onSubmit={onSubmit} onCancel={onClose} />\n\t\t</>\n\t);\n};\n\nexport default EditSeparately;\n","import { useCallback, useMemo, useRef } from 'react';\n\nimport type { DataState } from '@eventespresso/tpc';\n\nexport interface ManageTPCStates {\n\tsetTPCState: (dataState: DataState) => void;\n\tgetDataStates: () => Record<string, DataState>;\n}\n\nexport const useManageTPCStates = (): ManageTPCStates => {\n\t/**\n\t * This contains the data for all TPC instances.\n\t *\n\t * Since this is not used anywhere in the view, rather only used on final submission\n\t * useRef is made for this, to avoid any unnecessary re-renders\n\t */\n\tconst dataStates = useRef<Record<string, DataState>>({});\n\n\tconst setTPCState = useCallback<ManageTPCStates['setTPCState']>(\n\t\t(dataState) => {\n\t\t\tdataStates.current = { ...dataStates.current, [dataState?.ticket?.id]: dataState };\n\t\t},\n\t\t[dataStates]\n\t);\n\n\tconst getDataStates = useCallback<ManageTPCStates['getDataStates']>(() => dataStates.current, [dataStates]);\n\n\treturn useMemo(() => ({ setTPCState, getDataStates }), [setTPCState, getDataStates]);\n};\n","import { useState } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\n\nimport { EntityEditModal } from '@eventespresso/ui-components';\nimport { EditModeButtons } from './buttons';\nimport { EditTogether } from './editTogether';\nimport { EditSeparately } from './editSeparately';\nimport type { EditMode, EditPricesBaseProps } from './types';\n\nconst EditPrices: React.FC<EditPricesBaseProps> = ({ onClose, isOpen }) => {\n\tconst [editMode, setEditMode] = useState<EditMode>();\n\n\treturn (\n\t\t<EntityEditModal\n\t\t\tisOpen={isOpen}\n\t\t\tonClose={onClose}\n\t\t\tcloseOnOverlayClick={true}\n\t\t\ttitle={__('Bulk edit ticket prices')}\n\t\t\tshowAlertOnClose={false}\n\t\t>\n\t\t\t{!editMode && <EditModeButtons setEditMode={setEditMode} />}\n\t\t\t{editMode === 'together' && <EditTogether onClose={onClose} />}\n\t\t\t{editMode === 'separate' && <EditSeparately onClose={onClose} />}\n\t\t</EntityEditModal>\n\t);\n};\n\nexport default EditPrices;\n","import { useState, useCallback, useMemo } from 'react';\n\nimport { __ } from '@eventespresso/i18n';\nimport { BulkActions } from '@eventespresso/ee-components';\nimport { ErrorMessage } from '@eventespresso/ui-components';\nimport { entitiesWithGuIdInArray, TicketsStatus } from '@eventespresso/predicates';\nimport { SOLD_TICKET_ERROR_MESSAGE } from '@eventespresso/tpc';\nimport { USE_EVENT_EDITOR_BULK_EDIT } from '@eventespresso/constants';\nimport { useDisclosure, useMemoStringify } from '@eventespresso/hooks';\nimport { useTickets, useTicketsListFilterState } from '@eventespresso/edtr-services';\nimport { withCurrentUserCan, useBulkEdit } from '@eventespresso/services';\nimport type { BulkActionsProps } from '@eventespresso/ui-components';\n\nimport Checkbox from '../../tableView/Checkbox';\nimport { EditDetails } from '../details';\nimport { Delete } from '../delete';\nimport { EditPrices } from '../prices';\n\ntype Action = 'edit-details' | 'delete' | 'edit-prices' | '';\n\nconst Actions: React.FC = () => {\n\tconst [action, setAction] = useState<Action>('');\n\tconst { isOpen, onOpen, onClose } = useDisclosure();\n\tconst { status } = useTicketsListFilterState();\n\tconst { getSelected } = useBulkEdit();\n\tconst allTickets = useTickets();\n\n\tconst isEditPricesDisabled = useMemo(() => {\n\t\tconst selectedTickets = entitiesWithGuIdInArray(allTickets, getSelected());\n\t\tconst isSoldTicketSelected = selectedTickets.some((ticket) => Boolean(ticket.sold));\n\t\treturn isSoldTicketSelected;\n\t}, [allTickets, getSelected]);\n\n\tconst areTrashedTickets = status === TicketsStatus.trashedOnly;\n\n\tconst options = useMemoStringify([\n\t\t{\n\t\t\tvalue: '',\n\t\t\tlabel: __('bulk actions'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'edit-details',\n\t\t\tlabel: __('edit ticket details'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'delete',\n\t\t\tlabel: areTrashedTickets ? __('delete tickets') : __('trash tickets'),\n\t\t},\n\t\t{\n\t\t\tvalue: 'edit-prices',\n\t\t\tlabel: __('edit ticket prices'),\n\t\t\tdisabled: isEditPricesDisabled,\n\t\t},\n\t]);\n\n\tconst onApply = useCallback<BulkActionsProps<Action>['onApply']>(\n\t\t(action) => {\n\t\t\tsetAction(action);\n\t\t\tonOpen();\n\t\t},\n\t\t[onOpen]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<BulkActions\n\t\t\t\tCheckbox={Checkbox}\n\t\t\t\tdefaultAction=''\n\t\t\t\tid={'ee-bulk-edit-tickets-actions'}\n\t\t\t\tonApply={isEditPricesDisabled ? null : onApply}\n\t\t\t\toptions={options}\n\t\t\t/>\n\t\t\t{action === 'edit-details' && <EditDetails isOpen={isOpen} onClose={onClose} />}\n\t\t\t{action === 'delete' && <Delete areTrashedTickets={areTrashedTickets} onClose={onClose} />}\n\t\t\t{action === 'edit-prices' && <EditPrices isOpen={isOpen} onClose={onClose} />}\n\t\t\t<ErrorMessage message={isEditPricesDisabled && SOLD_TICKET_ERROR_MESSAGE} variant='subtle' />\n\t\t</>\n\t);\n};\n\nexport default withCurrentUserCan(USE_EVENT_EDITOR_BULK_EDIT)(Actions);\n","import { __ } from '@eventespresso/i18n';\n\nimport { EntityTable } from '@eventespresso/ee-components';\nimport useHeaderRowGenerator from './useHeaderRowGenerator';\nimport useBodyRowGenerator from './useBodyRowGenerator';\nimport {\n\tticketsList,\n\tdomain,\n\tuseFilteredTicketIds,\n\tuseReorderTickets,\n\tuseTicketsListFilterState,\n} from '@eventespresso/edtr-services';\nimport { withBulkEdit } from '@eventespresso/services';\nimport { Actions as BulkEditActions } from '../bulkEdit';\n\n/**\n * Displays tickets in a standard list table like view\n */\nconst TableView: React.FC = () => {\n\tconst filterState = useTicketsListFilterState();\n\tconst filteredTicketIds = useFilteredTicketIds();\n\n\tconst { sortResponder: sortTickets } = useReorderTickets(filteredTicketIds);\n\n\tconst bodyRowGenerator = useBodyRowGenerator();\n\tconst headerRowGenerator = useHeaderRowGenerator();\n\n\treturn (\n\t\t<>\n\t\t\t<BulkEditActions />\n\t\t\t<EntityTable\n\t\t\t\tbodyRowGenerator={bodyRowGenerator}\n\t\t\t\tdomain={domain}\n\t\t\t\tentityIds={filteredTicketIds}\n\t\t\t\tfilterState={filterState}\n\t\t\t\theaderRowGenerator={headerRowGenerator}\n\t\t\t\tlistId={ticketsList}\n\t\t\t\tonSort={sortTickets}\n\t\t\t\ttableCaption={__('Tickets')}\n\t\t\t\ttableId='ticket-entities-table-view'\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default withBulkEdit(TableView);\n"],"sourceRoot":""}